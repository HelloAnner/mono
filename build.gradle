plugins {
    id 'java-library'
}

allprojects {
    apply plugin: 'java-library'
    repositories {
        mavenLocal()
        google()
        maven { url 'https://maven.aliyun.com/repository/public' }
    }

    dependencies {

        testImplementation 'junit:junit:4.13.2'
        testImplementation 'org.easymock:easymock:4.3'
    }

    group = 'com.anner'
    version = '1.0'
    description = 'micro service base'
    java.sourceCompatibility = JavaVersion.VERSION_1_8
}

task mergeJars(type: Jar) {
    // 添加需要合并的 JAR 文件，可以是项目的依赖或自定义的 JAR 文件
    from(zipTree('common/common-collection/build/libs/common-collection-1.0.jar'))
    from(zipTree('common/common-log/build/libs/common-log-1.0.jar'))
    from(zipTree('common/common-json/build/libs/common-json-1.0.jar'))
    from(zipTree('common/common-redis/build/libs/common-redis-1.0.jar'))
    from(zipTree('common/common-reflect/build/libs/common-reflect-1.0.jar'))
    from(zipTree('common/common-properties/build/libs/common-properties-1.0.jar'))

    from(zipTree('comm/comm-core/build/libs/comm-core-1.0.jar'))
    // 设置输出的合并 JAR 文件名
    archiveFileName = "${project.name}" + "-1.0.jar"
    destinationDirectory = file("$buildDir/libs")
}

/**
 * =============== 子模块配置 ===============
 */
subprojects {
    group "com.anner"
}
